private async Task InsertarEnBandejaAsync(
    TarjetaModel tarjeta,
    ReposicionPinRequestDto request,
    string pin)
{
    try
    {
        string tipoTarjeta = _configuration["ParametrosSMS:TipoTarjeta"] ?? "TDC";

        var entidad = new BandejaEnvioSmsModel
        {
            NumeroTarjeta = tarjeta.NumeroTarjeta,
            Sms = request.ContenidoSMS.Replace("{PIN}", pin), 
            Celular = request.Telefono,
            Telco = request.OperadorTelefono,
            Referencia = Guid.NewGuid().ToString(),
            FechaInicio = DateTime.Now,
            TipoTarjeta = tipoTarjeta,
            Estado = 0,
            DescripcionEstado = "NO ENVIADO"
        };

        await _bandejaRepository.AddAsync(entidad);
    }
    catch (Exception ex)
    {
        _logger.LogError(ex, "Error insertando en BandejaEnvioSMS");
    }
}
