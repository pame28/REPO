<div class="wrapper">
  <div class="card" style="max-width: 400px; padding: 20px;">
    <div class="card-header" style="background-color:#1a73e8; color:#fff; padding: 15px; display:flex; align-items:center; gap:10px;">
      <img src="cid:logoBI" alt="Corporacion BI" style="height:40px; width:auto;">
      <h1 style="font-size:18px; margin:0;">Tu PIN Temporal</h1>
    </div>
    <div class="card-body" style="text-align:center; padding:20px;">
      <p style="font-size:14px; color:#555;">Estimado usuario,</p>
      <p style="font-size:14px; color:#555;">Tu PIN temporal es:</p>
      <div class="pin" style="font-size:28px; font-weight:bold; color:#1a73e8; margin:15px 0; letter-spacing:2px;">{PIN}</div>
      <p style="font-size:12px; color:#555;">Referencia: {REFERENCIA}</p>
      <a href="{LINK_PLATAFORMA}" style="display:inline-block; background-color:#1a73e8; color:#fff; padding:10px 20px; border-radius:5px; text-decoration:none; font-size:14px; margin-top:10px;">Ir a la plataforma</a>
    </div>
    <div class="footer" style="font-size:10px; color:#999; text-align:center; padding:10px; border-top:1px solid #e0e0e0;">
      Este correo es de uso interno, propiedad de Corporacion BI.<br>
      No compartas información con personal externo sin autorización.
    </div>
  </div>
</div>








using System.Net.Mime;

// Leer plantilla
var ruta = Path.Combine(Directory.GetCurrentDirectory(), "Templates", "Correo.html");
var plantillaHtml = await File.ReadAllTextAsync(ruta);
string cuerpoFinal = plantillaHtml
    .Replace("{PIN}", pin)
    .Replace("{REFERENCIA}", referencia)
    .Replace("{LINK_PLATAFORMA}", _configuration["UrlPlataforma"] ?? "#");

using var smtp = new SmtpClient(_serverEmail)
{
    DeliveryMethod = SmtpDeliveryMethod.Network,
    UseDefaultCredentials = true
};

using var mail = new MailMessage
{
    From = new MailAddress(_mailFrom),
    Subject = _mailSubject,
    IsBodyHtml = true
};

// Agregar destinatario
mail.To.Add(correoDestino);

// Crear vista HTML con logo inline
var htmlView = AlternateView.CreateAlternateViewFromString(cuerpoFinal, null, MediaTypeNames.Text.Html);
var logoInline = new LinkedResource(Path.Combine(Directory.GetCurrentDirectory(), "Templates", "logo.png"))
{
    ContentId = "logoBI",
    TransferEncoding = TransferEncoding.Base64
};
htmlView.LinkedResources.Add(logoInline);
mail.AlternateViews.Add(htmlView);

// Enviar
await smtp.SendMailAsync(mail, cancellationToken);
