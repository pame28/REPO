private async Task ConfigurarLibraryListAsync(OdbcConnection conn, List<string> librerias)
{
    foreach (var comando in ConstruirComandos(librerias))
    {
        using var cmd = conn.CreateCommand();
        cmd.CommandType = CommandType.Text;
        cmd.CommandTimeout = 300;

        cmd.CommandText = "CALL QSYS.QCMDEXC(?, ?)";

        var parametroComando = new OdbcParameter
        {
            OdbcType = OdbcType.Char,
            Size = comando.Length,
            Value = comando
        };

        var parametroLongitud = new OdbcParameter
        {
            OdbcType = OdbcType.Decimal,
            Precision = 15,
            Scale = 5,
            Value = (decimal)comando.Length
        };

        cmd.Parameters.Add(parametroComando);
        cmd.Parameters.Add(parametroLongitud);

        await cmd.ExecuteNonQueryAsync();
    }
}

private List<string> ConstruirComandos(List<string> librerias)
{
    var comandos = new List<string>();

    comandos.Add("CHGLIBL LIBL(*NONE)");

    foreach (var lib in librerias)
    {
        comandos.Add($"ADDLIBLE LIB({lib})");
    }

    return comandos;
}