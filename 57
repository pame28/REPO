using reposicion_pin.DTOs;
using reposicion_pin.Models;
using reposicion_pin.Repository.Interface;
using reposicion_pin.Service.Interface;

namespace reposicion_pin.Service
{
    public class ReposicionPinNotificacionService : IReposicionPinNotificacionService
    {
        private readonly IEnvioSmsRepository _sms;
        private readonly IEnvioEmailRepository _email;

        public ReposicionPinNotificacionService(
            IEnvioSmsRepository sms,
            IEnvioEmailRepository email)
        {
            _sms = sms;
            _email = email;
        }

        public async Task<(int Codigo, string Mensaje)> EnviarAsync(TarjetaModel tarjeta, ReposicionPinRequestDto request, string pin)
        {
            string referencia = DateTimeOffset.UtcNow.ToUnixTimeMilliseconds().ToString();

            if (request.MetodoEnvio == 1)
            {
                await _sms.EnviarSmsDirectoAsync(
                    request.Telefono,
                    request.OperadorTelefono,
                    request.ContenidoSMS,
                    pin,
                    referencia,
                    CancellationToken.None
                );
            }
            else
            {
                await _email.EnviarCorreoAsync(
                    request.Correo,
                    request.ContenidoCorreo,
                    pin,
                    referencia,
                    CancellationToken.None
                );
            }
        }
    }
}





Hace la modificacion vos
